<% # -*- mode: json -*- %>
{
  "name": "<%= node.chef_environment %>",
  "override_attributes": {
    "bach": { 
	<% if ENV['http_proxy'] %>
	"http_proxy": "<%= ENV['http_proxy'] %>",
	<% end %>
	<% if ENV['https_proxy'] %>
	"https_proxy": "<%= ENV['https_proxy'] %>",
	<% end %>
	"cluster": {
	    "certificates_path": "/usr/local/share/ca-certificates/bloomberg",
	    "organization": { "name": "bach", 
			      "longname": "BACH" },
	    "user" : { "name": "bach",
		       "longname": "BACH Administrator",
		       "email" : "bach@bcpc.example.com",
		       "password" : "thisishighlysecure" },
	    "node_count": "<%= ENV['BACH_CLUSTER_NODE_COUNT'] %>"
	}
    },
    "bcpc": {
      "graphite": {
        "graphite_disk": "sde"
      },
      "domain_name" : "bcpc.example.com",
      "management": {
        "vip" : "10.0.101.3",
        "interface" : "eth0",
        "netmask" : "255.255.255.240",
        "cidr" : "10.0.101.0/28",
        "gateway" : "10.0.101.2"
      },
      "storage": {
        "vip" : "10.0.101.19",
        "interface" : "eth1",
        "netmask" : "255.255.255.240",
        "cidr" : "10.0.101.16/28",
        "gateway" : "10.0.101.18"
      },
      "floating": {
        "vip" : "10.0.101.35",
        "interface" : "eth2",
        "netmask" : "255.255.255.240",
        "cidr" : "10.0.101.32/28",
        "gateway" : "10.0.101.34",
        "available_subnet" : "10.0.101.32/28"
      },
      "bootstrap": {
        "interface" : "eth0",
        "pxe_interface" : "eth1",
        "server" : "10.0.101.2",
        "dhcp_subnet" : "10.0.101.0",
        "dhcp_range" : "10.0.101.4 10.0.101.14"
      },
      "dns_servers" : ["8.8.8.8"],
      "hadoop" : {
        "yarn" : {
          "resourcemanager" : {
            "yarn.client.failover-sleep-base-ms": 30000
          }
        },
        "hdfs" : {
          "dfs_replication_factor" : 1
        },
        "disks" : ["sdb" , "sdc", "sdd", "sde"],
        "head_disks" : ["sdb" , "sdc", "sdd"],
        "distribution": {
          "version": "HDP",
          "key": "hortonworks.key"
        },
        "hbase": {
          "bucketcache": {
            "enabled": false
          },
          "repl": {
            "enabled": false
          },
          "repl": {
            "target": ""
          },
          "shortcircuit": {
            "read": false
          },
          "region": {
            "replication": {
              "enabled": false
            }
          },
          "ipc": {
            "warn": {
              "responsetime": 300
            }
          }          
        },
        "hbase_rs": {
          "xmn": {
            "size": 256
          },
          "xms": {
            "size": 1024
          },
          "xmx": {
            "size": 1024
          },
          "mx_dir_mem": {
            "size": 256
          },
          "hdfs_dir_mem": {
            "size": 128
          }
        },
        "oozie": {
          "memory_opts": "-Xmx512m -XX:MaxPermSize=64m"
        }
      },
      "repos" : {
        "hortonworks" : "http://public-repo-1.hortonworks.com/HDP/ubuntu12/2.x/GA/2.2.0.0",
        "hdp_utils" : "http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.20/repos/ubuntu12"
      }
    },
    "kafka": {
      "log_dir": "/disk/0"
    },
    "ntp": {
       "servers" : [ "0.pool.ntp.org", "1.pool.ntp.org", "2.pool.ntp.org", "3.pool.ntp.org" ]
    },
    "chef_client": {
      "server_url": "http://<%= bootstrap_fqdn %>:4000",
      "cache_path": "/var/chef/cache",
      "config": {
         "verify_api_cert": false,
	 "ssl_verify_mode": "verify_none"
      },
      "backup_path": "/var/chef/backup",
      "validation_client_name": "chef-validator",
      "run_path": "/var/chef"
    }
  },
  "json_class": "Chef::Environment",
  "description": "Laptop test environment",
  "cookbook_versions": {
  },
  "chef_type": "environment"
}
